---
apiVersion: longhorn.io/v1beta1
kind: Node
metadata:
  name: vanillax-ai # Replace with your actual node name
spec:
  disks:
    ssdtank:
      path: /mnt/ssdtank/k8s
      allowScheduling: true
      storageReserved: 10Gi
      tags:
        - longhorn-zfs-ssd  # This is the tag we'll use to identify this storage

---
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: longhorn-zfs-ssd
provisioner: driver.longhorn.io
parameters:
  numberOfReplicas: "1"
  staleReplicaTimeout: "2880"
  diskSelector: "longhorn-zfs-ssd"  # This now matches the tag we set on the disk

---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: my-app-data
spec:
  accessModes:
    - ReadWriteOnce
  storageClassName: longhorn-zfs-ssd
  resources:
    requests:
      storage: 10Gi
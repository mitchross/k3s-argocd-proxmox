# Only customize what we need, let the official Helm chart handle defaults

# Disable ingress since we're using HTTPRoute for external access
ingress:
  enabled: false
# Disable Docker-in-Docker completely (not compatible with Talos security policies)
dind:
  enabled: false
# Configuration section - this gets merged as the Kestra configuration file
configuration:
  kestra:
    plugins:
      defaults:
        - type: io.kestra.plugin.scripts
          forced: true
          values:
            taskRunner:
              type: io.kestra.plugin.ee.kubernetes.runner.Kubernetes
              namespace: kestra
              config:
                inCluster: true
        - type: io.kestra.plugin.scripts.shell
          forced: true
          values:
            taskRunner:
              type: io.kestra.plugin.ee.kubernetes.runner.Kubernetes
              namespace: kestra
              config:
                inCluster: true
        - type: io.kestra.plugin.scripts.python
          forced: true
          values:
            taskRunner:
              type: io.kestra.plugin.ee.kubernetes.runner.Kubernetes
              namespace: kestra
              config:
                inCluster: true
        - type: io.kestra.plugin.scripts.node
          forced: true
          values:
            taskRunner:
              type: io.kestra.plugin.ee.kubernetes.runner.Kubernetes
              namespace: kestra
              config:
                inCluster: true
# Resource configuration - increased memory for standalone mode
resources:
  requests:
    memory: 1Gi
    cpu: 500m
  limits:
    memory: 3Gi
    cpu: 2000m
